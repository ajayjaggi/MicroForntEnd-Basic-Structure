{"version":3,"file":"setup.js","sources":["../src/setup/AmpScripts.js","../src/setup/AmpScriptsManager.js","../src/setup/headerBoilerplate.js"],"sourcesContent":["import React from 'react';\nimport { Script } from '../amphtml/amphtml';\nimport { AMP } from '../constants';\n\nconst AmpScripts = class {\n  constructor(htmlFormat = AMP) {\n    this.scripts = new Map([\n      [\n        htmlFormat,\n        <Script key={htmlFormat} specName={htmlFormat} />,\n      ],\n    ]);\n  }\n\n  addExtension({ extension, version }) {\n    this.scripts.set(\n      extension,\n      <Script key={extension} specName={extension} version={version} />,\n    );\n  }\n\n  getScriptElements() {\n    return [...this.scripts.values()];\n  }\n};\n\nexport default AmpScripts;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AmpScripts from './AmpScripts';\nimport { CONTEXT_KEY } from '../constants';\n\nconst AmpScriptsManager = class extends Component {\n  getChildContext() {\n    const { ampScripts } = this.props;\n    return { [CONTEXT_KEY]: ampScripts };\n  }\n\n  render() {\n    const { children } = this.props;\n    return React.Children.only(children);\n  }\n};\n\nAmpScriptsManager.childContextTypes = {\n  [CONTEXT_KEY]: PropTypes.instanceOf(AmpScripts).isRequired,\n};\n\nAmpScriptsManager.propTypes = {\n  children: PropTypes.node.isRequired,\n  ampScripts: PropTypes.instanceOf(AmpScripts).isRequired,\n};\n\nexport default AmpScriptsManager;\n","/* eslint-disable react/no-danger */\nimport React from 'react';\n\nconst key = suffix => `react-amphtml-header-boilerplate-${suffix}`;\n\nexport default href => [\n  (\n    <meta key={key('meta-charset')} charSet=\"utf-8\" />\n  ),\n  (\n    <meta key={key('meta-viewport')} name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\" />\n  ),\n  (\n    <link key={key('canonical-link')} rel=\"canonical\" href={href} />\n  ),\n  (\n    <style\n      key={key('style')}\n      amp-boilerplate=\"\"\n      dangerouslySetInnerHTML={{\n        __html: `\n          body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}\n        `,\n      }}\n    />\n  ),\n  (\n    <noscript key={key('noscript')}>\n      <style\n        amp-boilerplate=\"\"\n        dangerouslySetInnerHTML={{\n          __html: `\n            body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}\n          `,\n        }}\n      />\n    </noscript>\n  ),\n];\n"],"names":["AmpScripts","constructor","htmlFormat","AMP","scripts","Map","React","Script","addExtension","extension","version","set","getScriptElements","values","AmpScriptsManager","Component","getChildContext","ampScripts","props","CONTEXT_KEY","render","children","Children","only","childContextTypes","PropTypes","instanceOf","isRequired","propTypes","node","key","suffix","href","__html"],"mappings":";;;;;;;;;;;;;AAIA,MAAMA,UAAU,GAAG,MAAM;EACvBC,WAAW,CAACC,UAAU,GAAGC,aAAd,EAAmB;SACvBC,OAAL,GAAe,IAAIC,GAAJ,CAAQ,CACrB,CACEH,UADF,EAEEI,6BAACC,cAAD;MAAQ,GAAG,EAAEL,UAAb;MAAyB,QAAQ,EAAEA;MAFrC,CADqB,CAAR,CAAf;;;EAQFM,YAAY,CAAC;IAAEC,SAAF;IAAaC;GAAd,EAAyB;SAC9BN,OAAL,CAAaO,GAAb,CACEF,SADF,EAEEH,6BAACC,cAAD;MAAQ,GAAG,EAAEE,SAAb;MAAwB,QAAQ,EAAEA,SAAlC;MAA6C,OAAO,EAAEC;MAFxD;;;EAMFE,iBAAiB,GAAG;WACX,CAAC,GAAG,KAAKR,OAAL,CAAaS,MAAb,EAAJ,CAAP;;;CAlBJ;;ACCA,MAAMC,iBAAiB,GAAG,cAAcC,eAAd,CAAwB;EAChDC,eAAe,GAAG;UACV;MAAEC;QAAe,KAAKC,KAA5B;WACO;OAAGC,qBAAD,GAAeF;KAAxB;;;EAGFG,MAAM,GAAG;UACD;MAAEC;QAAa,KAAKH,KAA1B;WACOZ,cAAK,CAACgB,QAAN,CAAeC,IAAf,CAAoBF,QAApB,CAAP;;;CARJ;AAYAP,iBAAiB,CAACU,iBAAlB,GAAsC;GACnCL,qBAAD,GAAeM,SAAS,CAACC,UAAV,CAAqB1B,UAArB,EAAiC2B;CADlD;AAIAb,iBAAiB,CAACc,SAAlB,GAA8B;EAC5BP,QAAQ,EAAEI,SAAS,CAACI,IAAV,CAAeF,UADG;EAE5BV,UAAU,EAAEQ,SAAS,CAACC,UAAV,CAAqB1B,UAArB,EAAiC2B;CAF/C;;ACrBA;AACA;AAEA,MAAMG,GAAG,GAAGC,MAAM,IAAK,oCAAmCA,MAAO,EAAjE;;AAEA,yBAAeC,IAAI,IAAI,CAEnB1B;EAAM,GAAG,EAAEwB,GAAG,CAAC,cAAD,CAAd;EAAgC,OAAO,EAAC;EAFrB,EAKnBxB;EAAM,GAAG,EAAEwB,GAAG,CAAC,eAAD,CAAd;EAAiC,IAAI,EAAC,UAAtC;EAAiD,OAAO,EAAC;EALtC,EAQnBxB;EAAM,GAAG,EAAEwB,GAAG,CAAC,gBAAD,CAAd;EAAkC,GAAG,EAAC,WAAtC;EAAkD,IAAI,EAAEE;EARrC,EAWnB1B;EACE,GAAG,EAAEwB,GAAG,CAAC,OAAD,CADV;qBAEkB,EAFlB;EAGE,uBAAuB,EAAE;IACvBG,MAAM,EAAG;;;;EAfM,EAsBnB3B;EAAU,GAAG,EAAEwB,GAAG,CAAC,UAAD;GAChBxB;qBACkB,EADlB;EAEE,uBAAuB,EAAE;IACvB2B,MAAM,EAAG;;;;EAJf,CAtBmB,CAAvB;;;;;;"}