{"version":3,"file":"helpers.js","sources":["../src/helpers/Action.js","../src/helpers/Bind.js"],"sourcesContent":["// TODO: Remove `{ Component }` when Rollup fixes its code splitting.\n// Currently, this fixes an `React__default is undefined` error.\nimport React, { Component } from 'react'; // eslint-disable-line no-unused-vars\nimport PropTypes from 'prop-types';\n\nexport const ON_ATTRIBUTE = 'on';\n\nconst Action = ({ children, events }) => {\n  const eventString = Object.entries(events).reduce(\n    (entireEventString, [eventName, eventActions], eventIndex) => {\n      const actionString = eventActions.reduce(\n        (entireActionString, nextAction, actionIndex) => (\n          `${entireActionString}${actionIndex > 0 ? ',' : ''}${nextAction}`\n        ),\n        '',\n      );\n\n      return `${entireEventString}${eventIndex > 0 ? ';' : ''}${eventName}:${actionString}`;\n    },\n    '',\n  );\n\n  return children({ [ON_ATTRIBUTE]: eventString });\n};\n\nAction.propTypes = {\n  children: PropTypes.func.isRequired,\n  events: PropTypes.objectOf((\n    PropTypes.arrayOf(PropTypes.string)\n  )).isRequired,\n};\n\nexport default Action;\n","// TODO: Remove `{ Component }` when Rollup fixes its code splitting.\n// Currently, this fixes an `React__default is undefined` error.\nimport React, { Component } from 'react'; // eslint-disable-line no-unused-vars\nimport PropTypes from 'prop-types';\nimport contextHelper from '../lib/contextHelper';\nimport { CONTEXT_KEY } from '../constants';\nimport { ON_ATTRIBUTE } from './Action';\n\nexport const BLACKLIST = [\n  ON_ATTRIBUTE,\n];\n\nconst boundAttributeRegExp = /^data-amp-.*?$/;\n\nconst Bind = ({ children, ...props }, context) => {\n  contextHelper({ context, extension: 'amp-bind' });\n\n  const boundAttributeProps = Object.entries(props).reduce(\n    (allProps, [propsName, propValue]) => ({\n      ...allProps,\n      [(\n        BLACKLIST.includes(propsName) || boundAttributeRegExp.test(propsName) ? (\n          propsName\n        ) : (\n          `data-amp-bind-${propsName}`\n        )\n      )]: (\n        propValue\n      ),\n    }),\n    {},\n  );\n\n  return children(boundAttributeProps);\n};\n\nBind.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nBind.contextTypes = {\n  [CONTEXT_KEY]: PropTypes.shape({\n    addExtension: PropTypes.func.isRequired,\n  }),\n};\n\nexport default Bind;\n"],"names":["ON_ATTRIBUTE","Action","children","events","eventString","Object","entries","reduce","entireEventString","eventName","eventActions","eventIndex","actionString","entireActionString","nextAction","actionIndex","propTypes","PropTypes","func","isRequired","objectOf","arrayOf","string","BLACKLIST","boundAttributeRegExp","Bind","context","props","contextHelper","extension","boundAttributeProps","allProps","propsName","propValue","includes","test","contextTypes","CONTEXT_KEY","shape","addExtension"],"mappings":";;;;;;;;;;;AAAA;AACA,AAIO,MAAMA,YAAY,GAAG,IAArB;;AAEP,MAAMC,MAAM,GAAG,CAAC;EAAEC,QAAF;EAAYC;CAAb,KAA0B;QACjCC,WAAW,GAAGC,MAAM,CAACC,OAAP,CAAeH,MAAf,EAAuBI,MAAvB,CAClB,CAACC,iBAAD,EAAoB,CAACC,SAAD,EAAYC,YAAZ,CAApB,EAA+CC,UAA/C,KAA8D;UACtDC,YAAY,GAAGF,YAAY,CAACH,MAAb,CACnB,CAACM,kBAAD,EAAqBC,UAArB,EAAiCC,WAAjC,KACG,GAAEF,kBAAmB,GAAEE,WAAW,GAAG,CAAd,GAAkB,GAAlB,GAAwB,EAAG,GAAED,UAAW,EAF/C,EAInB,EAJmB,CAArB;WAOQ,GAAEN,iBAAkB,GAAEG,UAAU,GAAG,CAAb,GAAiB,GAAjB,GAAuB,EAAG,GAAEF,SAAU,IAAGG,YAAa,EAApF;GATgB,EAWlB,EAXkB,CAApB;SAcOV,QAAQ,CAAC;KAAGF,YAAD,GAAgBI;GAAnB,CAAf;CAfF;;AAkBAH,MAAM,CAACe,SAAP,GAAmB;EACjBd,QAAQ,EAAEe,SAAS,CAACC,IAAV,CAAeC,UADR;EAEjBhB,MAAM,EAAEc,SAAS,CAACG,QAAV,CACNH,SAAS,CAACI,OAAV,CAAkBJ,SAAS,CAACK,MAA5B,CADM,EAELH;CAJL;;ACjBO,MAAMI,SAAS,GAAG,CACvBvB,YADuB,CAAlB;AAIP,MAAMwB,oBAAoB,GAAG,gBAA7B;;AAEA,MAAMC,IAAI,GAAG,OAAyBC,OAAzB,KAAqC;MAApC;IAAExB;GAAkC;MAArByB,KAAqB;;EAChDC,uBAAa,CAAC;IAAEF,OAAF;IAAWG,SAAS,EAAE;GAAvB,CAAb;QAEMC,mBAAmB,GAAGzB,MAAM,CAACC,OAAP,CAAeqB,KAAf,EAAsBpB,MAAtB,CAC1B,CAACwB,QAAD,EAAW,CAACC,SAAD,EAAYC,SAAZ,CAAX,iCACKF,QADL;KAGIR,SAAS,CAACW,QAAV,CAAmBF,SAAnB,KAAiCR,oBAAoB,CAACW,IAArB,CAA0BH,SAA1B,CAAjC,GACEA,SADF,GAGG,iBAAgBA,SAAU,EAJ/B,GAOEC;IAVsB,EAa1B,EAb0B,CAA5B;SAgBO/B,QAAQ,CAAC4B,mBAAD,CAAf;CAnBF;;AAsBAL,IAAI,CAACT,SAAL,GAAiB;EACfd,QAAQ,EAAEe,SAAS,CAACC,IAAV,CAAeC;CAD3B;AAIAM,IAAI,CAACW,YAAL,GAAoB;GACjBC,qBAAD,GAAepB,SAAS,CAACqB,KAAV,CAAgB;IAC7BC,YAAY,EAAEtB,SAAS,CAACC,IAAV,CAAeC;GADhB;CADjB;;;;;"}